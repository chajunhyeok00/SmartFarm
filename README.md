# SmartFarm ESP32 프로젝트

이 프로젝트는 **ESP32**를 사용하여 **스마트 농업 시스템**을 구축하는 프로젝트입니다. **DHT11 센서**를 이용해 온도와 습도를 측정하고, 이를 **Wi-Fi**를 통해 서버로 전송하여 식물에 적합한 환경을 자동으로 유지합니다. 만약 **습도가 낮으면 모터(펌프)**를 작동시켜 식물에 자동으로 물을 주는 기능도 구현했습니다.

## 프로젝트 개요

- **목표**: 온도와 습도를 측정하고, 이를 서버로 전송하여 **스마트 농업** 시스템을 구현합니다. 또한, 습도가 낮을 경우 **모터**를 작동시켜 **자동 물주기**를 수행합니다.
- **센서**: **DHT11** 온도 및 습도 센서
- **마이크로컨트롤러**: **ESP32**
- **기타 하드웨어**: **모터 드라이버** (펌프 제어)

## 기술 스택

- **ESP32**: 마이크로컨트롤러
- **DHT11 센서**: 온도 및 습도 측정
- **Wi-Fi**: 서버와의 데이터 통신
- **모터 드라이버**: 펌프 작동
- **HTTPClient 라이브러리**: HTTP 요청 전송

## 설치 방법

### 1. **필수 소프트웨어 설치**
- **아두이노 IDE 설치**
  - [ESP32 보드 설치 방법](https://docs.espressif.com/projects/arduino-esp32/en/latest/)
  
- **필요한 라이브러리 설치**
  1. **DHT 센서 라이브러리**:
     - 아두이노 IDE에서 **Sketch → Include Library → Manage Libraries**로 들어가서 `DHT sensor library`를 설치합니다.
  
  2. **Wi-Fi 라이브러리**: 기본적으로 ESP32 보드에 포함되어 있습니다.

### 2. **Wi-Fi 정보 설정**
- 코드 내에서 Wi-Fi 정보를 자신의 네트워크에 맞게 수정합니다:

```cpp
const char* ssid = "YOUR_SSID";
const char* password = "YOUR_PASSWORD";

### 3. **서버 주소 설정**
- 서버 URL을 실제 데이터를 처리할 서버의 주소로 수정합니다:

```cpp
const char* serverName = "http://192.168.1.9:5000/sensor";

----------------------------------------------------------------------------------------------
주요 기능
1. 온도/습도 측정
DHT11 센서를 사용하여 온도와 습도를 측정합니다.

2. 데이터 전송
Wi-Fi를 통해 측정한 온도와 습도 데이터를 서버에 POST 방식으로 전송합니다.

3. 자동 물주기
습도가 60% 미만일 경우, 펌프가 10초간 작동하여 물을 주는 기능을 구현합니다.

4. 서버 응답 처리
서버에 데이터를 전송한 후, 서버의 응답 코드를 확인하고 콘솔에 출력합니다.

```cpp
if (httpResponseCode > 0) {
  String response = http.getString();  // 서버로부터 받은 응답 내용을 문자열로 저장
  Serial.println("✅ 서버 응답: " + response);  // 응답 내용 출력
} else {
  Serial.println("❌ 전송 실패, 코드: " + String(httpResponseCode));  // 응답 코드 출력
}

- httpResponseCode > 0: 서버가 정상적으로 응답했을 때(예: 200 OK).
- http.getString(): 서버로부터 받은 응답을 response 변수에 저장하고 출력합니다.
- 응답 코드가 0보다 작을 경우: 서버와 연결 실패나 네트워크 문제로 인해 전송 실패.

5. 펌프 작동 조건
습도가 60% 미만일 경우 펌프가 10초간 작동하여 물을 주며, 이후 자동으로 정지합니다.
if (h < 60.0) {
  Serial.println("💧 습도 낮음 - 펌프 작동");
  digitalWrite(MOTOR_IN1, HIGH);
  digitalWrite(MOTOR_IN2, LOW);
  delay(10000);  // 10초 작동
  digitalWrite(MOTOR_IN1, LOW);
  digitalWrite(MOTOR_IN2, LOW);
  Serial.println("🛑 펌프 정지");
}

6. 주요 핀 설정
DHT 센서: GPIO 22번
모터 드라이버: IN1: GPIO 25번 , IN2: GPIO 26번

코드 흐름
1. Wi-Fi 연결: ESP32는 Wi-Fi 네트워크에 연결됩니다.
2. DHT 센서 값 읽기: DHT11 센서로부터 온도와 습도 값을 읽어옵니다.
3. 서버로 데이터 전송: 온도와 습도 값을 서버로 전송합니다.
4. 모터 작동: 습도가 60% 미만일 경우 모터가 작동하여 물을 줍니다.

사용 방법
1.아두이노 IDE에서 smartfarm.ino 파일을 ESP32에 업로드합니다.
2.ESP32가 Wi-Fi에 연결되면, DHT11 센서를 통해 온도와 습도를 측정하고 서버로 데이터를 전송합니다.
3.서버에서 데이터를 처리한 후, 응답을 콘솔에 출력합니다.
4.만약 습도가 60% 미만일 경우, 펌프가 작동하여 물을 줍니다.
